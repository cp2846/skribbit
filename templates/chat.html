<link rel="stylesheet" href="{{url_for('static', filename='styles/chat.css')}}"/>

<div class="ink-grid">
  <div class="column-group chat-holder">
    <div class="all-20 medium-30 no-display-small no-display-tiny">
      <div class="pane tall" id="userbox">
      {% raw %}
      Online  {{ numUsers }} 
        <!-- users list -->
        <div class="column-group">
            <div v-for="u in users" class="user pane all-100 cell">
                <div class="frogvatar-chat">
                    <img src="/resources/head.gif" class="frogvatar"/>
                    <img :src="getFrogvatarEyes(u)" class="frogvatar"/>
                    <img :src="getFrogvatarMouth(u)" class="frogvatar"/>
                </div>
                <div class="userInfo">
                    {{ u.username }} <span v-show="u.score">( {{ u.score }} )</span>
                    <img v-show="u.statusReady" src="/resources/checkmark.gif" class="status-icon"/>
                    <img v-show="u.statusDrawing" src="/resources/pencil.gif" class="status-icon"/>
                </div>
            </div>
                
        </div>
      </div>
      {% endraw %}
    </div>
    
    <div class="all-80 medium-70 small-100 tiny-100">
      <div class="ink-form pane tall" id="chat">
            <div class="column-group">
                
                <!-- chat input-->
                <div class="control-group all-100" id="chat-input">
                    <div class="control append-button">
                        <span><input type="text" id="chat-textarea"></span>
                        <button class="ink-button" id="chat-button">Submit</button>
                    </div>
                </div>
            </div>
            <div id="messages">
                {% raw %}
                <!-- chat messages -->
                <div v-for="m in messages" class="message">
  
                    <span class="username" v-show="m.uid != 'ribbot'">
                        {{ getUsername(m.uid) }}: 
                    </span>
                    <span class="chat-message-body">
                        {{ m.message }}
                    </span>
                    
                </div>
                {% endraw %}
            </div>
        </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="{{ url_for('static', filename='scripts/chat.js')}}"></script>
<script>
    document.getElementById("chat-textarea").addEventListener('keydown', e => {
        handleInput(e);
    });

    document.getElementById("chat-button").addEventListener('mousedown', e => {
        chatArea = document.getElementById('chat-textarea');
        sendMessage(chatArea.value.trim());
        chatArea.value = '';
    });

</script>